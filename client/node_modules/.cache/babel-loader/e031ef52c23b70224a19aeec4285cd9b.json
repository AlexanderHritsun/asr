{"ast":null,"code":"var _jsxFileName = \"/Users/alexander_hritsun/WebstormProjects/asr/client/src/components/Review/index.jsx\";\nimport React, { useContext } from 'react';\nimport { Card, Button } from \"react-bootstrap\";\nimport { AuthContext } from \"context/AuthContext\";\nimport { useHttp } from \"hooks/http.hook\";\nimport BeautyStars from \"beauty-stars\";\nexport const Review = ({\n  review,\n  onActionPerformed\n}) => {\n  const {\n    request\n  } = useHttp();\n  const {\n    token,\n    userRole\n  } = useContext(AuthContext);\n  const isModer = userRole === 'moderator';\n  const isAdmin = userRole === 'admin';\n\n  const handleDeleteReview = async () => {\n    try {\n      const data = await request(`/api/review/${review._id}/delete`, 'DELETE', null, {\n        Authorization: `Bearer ${token}`\n      });\n      if (onActionPerformed) onActionPerformed(data);\n    } catch (e) {}\n  };\n\n  if (review) {\n    return /*#__PURE__*/React.createElement(Card, {\n      className: \"w100 comment\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 24,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Card.Body, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 25,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(Card.Title, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 26,\n        columnNumber: 21\n      }\n    }, review.userId ? review.userId.name : ''), /*#__PURE__*/React.createElement(Card.Text, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 29,\n        columnNumber: 21\n      }\n    }, review.text), /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        display: 'flex'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 32,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(BeautyStars, {\n      size: 15,\n      value: review.rating,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 37,\n        columnNumber: 25\n      }\n    })), (isAdmin || isModer) && /*#__PURE__*/React.createElement(Button, {\n      variant: \"secondary\",\n      className: \"delete-btn\",\n      onClick: () => handleDeleteReview(),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 42,\n        columnNumber: 46\n      }\n    }, \"\\u0423\\u0434\\u0430\\u043B\\u0438\\u0442\\u044C\")));\n  }\n};","map":{"version":3,"sources":["/Users/alexander_hritsun/WebstormProjects/asr/client/src/components/Review/index.jsx"],"names":["React","useContext","Card","Button","AuthContext","useHttp","BeautyStars","Review","review","onActionPerformed","request","token","userRole","isModer","isAdmin","handleDeleteReview","data","_id","Authorization","e","userId","name","text","display","rating"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,UAAhB,QAAkC,OAAlC;AACA,SAASC,IAAT,EAAeC,MAAf,QAA6B,iBAA7B;AACA,SAASC,WAAT,QAA4B,qBAA5B;AACA,SAASC,OAAT,QAAwB,iBAAxB;AACA,OAAOC,WAAP,MAAwB,cAAxB;AAEA,OAAO,MAAMC,MAAM,GAAG,CAAC;AAAEC,EAAAA,MAAF;AAAUC,EAAAA;AAAV,CAAD,KAAmC;AACrD,QAAM;AAAEC,IAAAA;AAAF,MAAcL,OAAO,EAA3B;AACA,QAAM;AAAEM,IAAAA,KAAF;AAASC,IAAAA;AAAT,MAAsBX,UAAU,CAACG,WAAD,CAAtC;AACA,QAAMS,OAAO,GAAGD,QAAQ,KAAK,WAA7B;AACA,QAAME,OAAO,GAAGF,QAAQ,KAAK,OAA7B;;AAEA,QAAMG,kBAAkB,GAAG,YAAY;AACnC,QAAI;AACA,YAAMC,IAAI,GAAG,MAAMN,OAAO,CAAE,eAAcF,MAAM,CAACS,GAAI,SAA3B,EAAqC,QAArC,EAA+C,IAA/C,EAAqD;AAC3EC,QAAAA,aAAa,EAAG,UAASP,KAAM;AAD4C,OAArD,CAA1B;AAGA,UAAIF,iBAAJ,EAAuBA,iBAAiB,CAACO,IAAD,CAAjB;AAC1B,KALD,CAKE,OAAOG,CAAP,EAAU,CAAG;AAClB,GAPD;;AASA,MAAIX,MAAJ,EAAY;AACR,wBACI,oBAAC,IAAD;AAAM,MAAA,SAAS,EAAC,cAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI,oBAAC,IAAD,CAAM,IAAN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI,oBAAC,IAAD,CAAM,KAAN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACKA,MAAM,CAACY,MAAP,GAAgBZ,MAAM,CAACY,MAAP,CAAcC,IAA9B,GAAqC,EAD1C,CADJ,eAII,oBAAC,IAAD,CAAM,IAAN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACKb,MAAM,CAACc,IADZ,CAJJ,eAOI;AACI,MAAA,KAAK,EAAE;AACHC,QAAAA,OAAO,EAAE;AADN,OADX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAKI,oBAAC,WAAD;AACI,MAAA,IAAI,EAAE,EADV;AAEI,MAAA,KAAK,EAAEf,MAAM,CAACgB,MAFlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MALJ,CAPJ,EAiBK,CAACV,OAAO,IAAID,OAAZ,kBAAwB,oBAAC,MAAD;AAAQ,MAAA,OAAO,EAAC,WAAhB;AAA4B,MAAA,SAAS,EAAC,YAAtC;AAAmD,MAAA,OAAO,EAAE,MAAME,kBAAkB,EAApF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oDAjB7B,CADJ,CADJ;AAuBH;AACJ,CAxCM","sourcesContent":["import React, { useContext } from 'react';\nimport { Card, Button } from \"react-bootstrap\";\nimport { AuthContext } from \"context/AuthContext\";\nimport { useHttp } from \"hooks/http.hook\";\nimport BeautyStars from \"beauty-stars\";\n\nexport const Review = ({ review, onActionPerformed }) => {\n    const { request } = useHttp();\n    const { token, userRole } = useContext(AuthContext)\n    const isModer = userRole === 'moderator';\n    const isAdmin = userRole === 'admin';\n\n    const handleDeleteReview = async () => {\n        try {\n            const data = await request(`/api/review/${review._id}/delete`, 'DELETE', null, {\n                Authorization: `Bearer ${token}`\n            })\n            if (onActionPerformed) onActionPerformed(data);\n        } catch (e) { }\n    }\n\n    if (review) {\n        return (\n            <Card className='w100 comment'>\n                <Card.Body>\n                    <Card.Title>\n                        {review.userId ? review.userId.name : ''}\n                    </Card.Title>\n                    <Card.Text>\n                        {review.text}\n                    </Card.Text>\n                    <div\n                        style={{\n                            display: 'flex'\n                        }}\n                    >\n                        <BeautyStars\n                            size={15}\n                            value={review.rating}\n                        />\n                    </div>\n                    {(isAdmin || isModer) && <Button variant=\"secondary\" className=\"delete-btn\" onClick={() => handleDeleteReview()}>Удалить</Button>}\n                </Card.Body>\n            </Card>\n        )\n    }\n}\n"]},"metadata":{},"sourceType":"module"}