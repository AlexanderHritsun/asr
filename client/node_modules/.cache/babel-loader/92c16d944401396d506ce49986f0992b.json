{"ast":null,"code":"var _jsxFileName = \"/Users/alexander_hritsun/WebstormProjects/asr/client/src/pages/Users/index.jsx\";\nimport React, { useCallback, useContext, useEffect, useState } from \"react\";\nimport { useHttp } from \"../../hooks/http.hook\";\nimport { Spinner } from \"../../components/Loader\";\nimport { UserCard } from \"../../components/User\";\nimport { AuthContext } from \"../../context/AuthContext\";\n\nfunction Users() {\n  const [users, setUsers] = useState([]);\n  const {\n    loading,\n    request\n  } = useHttp();\n  const {\n    token\n  } = useContext(AuthContext);\n  const deleteUser = useCallback(async id => {\n    try {\n      await request(`/api/users/${id}/delete`, 'DELETE', null, {\n        Authorization: `Bearer ${token}`\n      });\n      fetchUsers();\n    } catch (e) {}\n  }, [token, request]);\n  const fetchUsers = useCallback(async () => {\n    try {\n      const fetched = await request('/api/users', 'GET', null, {\n        Authorization: `Bearer ${token}`\n      });\n      setUsers(fetched);\n    } catch (e) {}\n  }, [token, request]);\n  useEffect(() => {\n    fetchUsers();\n  }, [fetchUsers]);\n\n  if (loading) {\n    return /*#__PURE__*/React.createElement(Spinner, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 36,\n        columnNumber: 16\n      }\n    });\n  }\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"user\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 40,\n      columnNumber: 9\n    }\n  }, !loading && /*#__PURE__*/React.createElement(UserCard, {\n    users: users,\n    deleteUser: deleteUser,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 26\n    }\n  }));\n}\n\nexport default Users;","map":{"version":3,"sources":["/Users/alexander_hritsun/WebstormProjects/asr/client/src/pages/Users/index.jsx"],"names":["React","useCallback","useContext","useEffect","useState","useHttp","Spinner","UserCard","AuthContext","Users","users","setUsers","loading","request","token","deleteUser","id","Authorization","fetchUsers","e","fetched"],"mappings":";AAAA,OAAOA,KAAP,IAAeC,WAAf,EAA4BC,UAA5B,EAAwCC,SAAxC,EAAmDC,QAAnD,QAAkE,OAAlE;AACA,SAAQC,OAAR,QAAsB,uBAAtB;AACA,SAAQC,OAAR,QAAsB,yBAAtB;AACA,SAAQC,QAAR,QAAuB,uBAAvB;AACA,SAAQC,WAAR,QAA0B,2BAA1B;;AAEA,SAASC,KAAT,GAAiB;AACb,QAAM,CAACC,KAAD,EAAQC,QAAR,IAAoBP,QAAQ,CAAC,EAAD,CAAlC;AACA,QAAM;AAACQ,IAAAA,OAAD;AAAUC,IAAAA;AAAV,MAAqBR,OAAO,EAAlC;AACA,QAAM;AAACS,IAAAA;AAAD,MAAUZ,UAAU,CAACM,WAAD,CAA1B;AAEA,QAAMO,UAAU,GAAGd,WAAW,CAAC,MAAOe,EAAP,IAAc;AACzC,QAAI;AAEA,YAAMH,OAAO,CAAE,cAAaG,EAAG,SAAlB,EAA4B,QAA5B,EAAsC,IAAtC,EAA4C;AACrDC,QAAAA,aAAa,EAAG,UAASH,KAAM;AADsB,OAA5C,CAAb;AAGAI,MAAAA,UAAU;AACb,KAND,CAME,OAAOC,CAAP,EAAU,CAAE;AACjB,GAR6B,EAQ3B,CAACL,KAAD,EAAQD,OAAR,CAR2B,CAA9B;AAUA,QAAMK,UAAU,GAAGjB,WAAW,CAAC,YAAY;AACvC,QAAI;AACA,YAAMmB,OAAO,GAAG,MAAMP,OAAO,CAAC,YAAD,EAAe,KAAf,EAAsB,IAAtB,EAA4B;AACrDI,QAAAA,aAAa,EAAG,UAASH,KAAM;AADsB,OAA5B,CAA7B;AAGAH,MAAAA,QAAQ,CAACS,OAAD,CAAR;AACH,KALD,CAKE,OAAOD,CAAP,EAAU,CAAE;AACjB,GAP6B,EAO3B,CAACL,KAAD,EAAQD,OAAR,CAP2B,CAA9B;AASAV,EAAAA,SAAS,CAAC,MAAM;AACZe,IAAAA,UAAU;AACb,GAFQ,EAEN,CAACA,UAAD,CAFM,CAAT;;AAIA,MAAIN,OAAJ,EAAa;AACT,wBAAO,oBAAC,OAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAAP;AACH;;AAED,sBACI;AAAK,IAAA,SAAS,EAAG,MAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACK,CAACA,OAAD,iBAAY,oBAAC,QAAD;AAAU,IAAA,KAAK,EAAEF,KAAjB;AAAwB,IAAA,UAAU,EAAEK,UAApC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADjB,CADJ;AAKH;;AAED,eAAeN,KAAf","sourcesContent":["import React, {useCallback, useContext, useEffect, useState} from \"react\";\nimport {useHttp} from \"../../hooks/http.hook\";\nimport {Spinner} from \"../../components/Loader\";\nimport {UserCard} from \"../../components/User\";\nimport {AuthContext} from \"../../context/AuthContext\";\n\nfunction Users() {\n    const [users, setUsers] = useState([])\n    const {loading, request} = useHttp()\n    const {token} = useContext(AuthContext)\n\n    const deleteUser = useCallback(async (id) => {\n        try {\n\n            await request(`/api/users/${id}/delete`, 'DELETE', null, {\n                Authorization: `Bearer ${token}`\n            })\n            fetchUsers()\n        } catch (e) {}\n    }, [token, request])\n\n    const fetchUsers = useCallback(async () => {\n        try {\n            const fetched = await request('/api/users', 'GET', null, {\n                Authorization: `Bearer ${token}`\n            })\n            setUsers(fetched)\n        } catch (e) {}\n    }, [token, request])\n\n    useEffect(() => {\n        fetchUsers()\n    }, [fetchUsers])\n\n    if (loading) {\n        return <Spinner/>\n    }\n\n    return (\n        <div className = \"user\">\n            {!loading && <UserCard users={users} deleteUser={deleteUser} />}\n        </div>\n    )\n}\n\nexport default Users"]},"metadata":{},"sourceType":"module"}