{"ast":null,"code":"var _jsxFileName = \"/Users/alexander_hritsun/WebstormProjects/asr/client/src/pages/Posts/PostCard.jsx\";\nimport { Button, Card, Container } from \"react-bootstrap\";\nimport React, { useContext } from \"react\";\nimport { NavLink } from \"react-router-dom\";\nimport { AuthContext } from \"context/AuthContext\";\nimport { useHttp } from \"hooks/http.hook\";\nexport const PostCard = ({\n  posts,\n  onActionPerformed\n}) => {\n  const {\n    request\n  } = useHttp();\n  const {\n    token,\n    userRole\n  } = useContext(AuthContext);\n  const isModer = userRole === 'moderator';\n  const isAdmin = userRole === 'admin';\n\n  const handleDeletePost = async post => {\n    try {\n      const data = await request(`/api/posts/${post._id}/delete`, 'DELETE', null, {\n        Authorization: `Bearer ${token}`\n      });\n      if (onActionPerformed) onActionPerformed(data);\n    } catch (e) {}\n  };\n\n  if (!posts.length) {\n    return /*#__PURE__*/React.createElement(\"p\", {\n      className: \"align-self-center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 24,\n        columnNumber: 16\n      }\n    }, \"\\u041F\\u043E\\u0441\\u0442\\u043E\\u0432 \\u043F\\u043E\\u043A\\u0430 \\u043D\\u0435\\u0442\");\n  }\n\n  return /*#__PURE__*/React.createElement(Container, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 28,\n      columnNumber: 9\n    }\n  }, posts.map((post, i) => {\n    return /*#__PURE__*/React.createElement(Card, {\n      key: i,\n      className: \"w100\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 31,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(Card.Body, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 32,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(Card.Title, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 33,\n        columnNumber: 29\n      }\n    }, post.title), /*#__PURE__*/React.createElement(Card.Text, {\n      className: \"post-text\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 35,\n        columnNumber: 29\n      }\n    }, post.text), /*#__PURE__*/React.createElement(NavLink, {\n      to: `/posts/${post._id}`,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 39,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(Button, {\n      variant: \"primary\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 40,\n        columnNumber: 33\n      }\n    }, \"\\u0427\\u0438\\u0442\\u0430\\u0442\\u044C \\u0434\\u0430\\u043B\\u044C\\u0448\\u0435\"))), (isAdmin || isModer) && /*#__PURE__*/React.createElement(Button, {\n      className: \"delete-btn\",\n      variant: \"secondary\",\n      onClick: () => handleDeletePost(post),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 44,\n        columnNumber: 50\n      }\n    }, \"\\u0423\\u0434\\u0430\\u043B\\u0438\\u0442\\u044C\"));\n  }));\n};","map":{"version":3,"sources":["/Users/alexander_hritsun/WebstormProjects/asr/client/src/pages/Posts/PostCard.jsx"],"names":["Button","Card","Container","React","useContext","NavLink","AuthContext","useHttp","PostCard","posts","onActionPerformed","request","token","userRole","isModer","isAdmin","handleDeletePost","post","data","_id","Authorization","e","length","map","i","title","text"],"mappings":";AAAA,SAAQA,MAAR,EAAgBC,IAAhB,EAAsBC,SAAtB,QAAsC,iBAAtC;AACA,OAAOC,KAAP,IAAgBC,UAAhB,QAAkC,OAAlC;AACA,SAAQC,OAAR,QAAsB,kBAAtB;AACA,SAASC,WAAT,QAA4B,qBAA5B;AACA,SAASC,OAAT,QAAwB,iBAAxB;AAGA,OAAO,MAAMC,QAAQ,GAAG,CAAC;AAAEC,EAAAA,KAAF;AAASC,EAAAA;AAAT,CAAD,KAAkC;AACtD,QAAM;AAACC,IAAAA;AAAD,MAAYJ,OAAO,EAAzB;AACA,QAAM;AAAEK,IAAAA,KAAF;AAASC,IAAAA;AAAT,MAAsBT,UAAU,CAACE,WAAD,CAAtC;AACA,QAAMQ,OAAO,GAAGD,QAAQ,KAAK,WAA7B;AACA,QAAME,OAAO,GAAGF,QAAQ,KAAK,OAA7B;;AAEA,QAAMG,gBAAgB,GAAG,MAAOC,IAAP,IAAgB;AACrC,QAAI;AACA,YAAMC,IAAI,GAAG,MAAMP,OAAO,CAAE,cAAaM,IAAI,CAACE,GAAI,SAAxB,EAAkC,QAAlC,EAA4C,IAA5C,EAAkD;AACxEC,QAAAA,aAAa,EAAG,UAASR,KAAM;AADyC,OAAlD,CAA1B;AAGA,UAAIF,iBAAJ,EAAuBA,iBAAiB,CAACQ,IAAD,CAAjB;AAC1B,KALD,CAKE,OAAOG,CAAP,EAAU,CAAG;AAClB,GAPD;;AASA,MAAG,CAACZ,KAAK,CAACa,MAAV,EAAiB;AACb,wBAAO;AAAG,MAAA,SAAS,EAAC,mBAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0FAAP;AACH;;AAED,sBACI,oBAAC,SAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACKb,KAAK,CAACc,GAAN,CAAW,CAACN,IAAD,EAAOO,CAAP,KAAa;AACrB,wBACI,oBAAC,IAAD;AAAM,MAAA,GAAG,EAAEA,CAAX;AAAc,MAAA,SAAS,EAAC,MAAxB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI,oBAAC,IAAD,CAAM,IAAN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI,oBAAC,IAAD,CAAM,KAAN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAaP,IAAI,CAACQ,KAAlB,CADJ,eAGI,oBAAC,IAAD,CAAM,IAAN;AAAW,MAAA,SAAS,EAAC,WAArB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACKR,IAAI,CAACS,IADV,CAHJ,eAOI,oBAAC,OAAD;AAAS,MAAA,EAAE,EAAG,UAAST,IAAI,CAACE,GAAI,EAAhC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI,oBAAC,MAAD;AAAQ,MAAA,OAAO,EAAC,SAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mFADJ,CAPJ,CADJ,EAaK,CAACJ,OAAO,IAAID,OAAZ,kBAAwB,oBAAC,MAAD;AAAQ,MAAA,SAAS,EAAC,YAAlB;AAA+B,MAAA,OAAO,EAAC,WAAvC;AAAmD,MAAA,OAAO,EAAE,MAAME,gBAAgB,CAACC,IAAD,CAAlF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oDAb7B,CADJ;AAiBH,GAlBA,CADL,CADJ;AAuBH,CA1CM","sourcesContent":["import {Button, Card, Container} from \"react-bootstrap\";\nimport React, { useContext } from \"react\";\nimport {NavLink} from \"react-router-dom\";\nimport { AuthContext } from \"context/AuthContext\";\nimport { useHttp } from \"hooks/http.hook\";\n\n\nexport const PostCard = ({ posts, onActionPerformed }) => {\n    const {request} = useHttp()\n    const { token, userRole } = useContext(AuthContext)\n    const isModer = userRole === 'moderator';\n    const isAdmin = userRole === 'admin';\n\n    const handleDeletePost = async (post) => {\n        try {\n            const data = await request(`/api/posts/${post._id}/delete`, 'DELETE', null, {\n                Authorization: `Bearer ${token}`\n            })\n            if (onActionPerformed) onActionPerformed(data);\n        } catch (e) { }\n    }\n\n    if(!posts.length){\n        return <p className=\"align-self-center\">Постов пока нет</p>\n    }\n\n    return (\n        <Container>\n            {posts.map( (post, i) => {\n                return (\n                    <Card key={i} className='w100'>\n                        <Card.Body>\n                            <Card.Title>{post.title}</Card.Title>\n\n                            <Card.Text className=\"post-text\">\n                                {post.text}\n                            </Card.Text>\n\n                            <NavLink to={`/posts/${post._id}`}>\n                                <Button variant=\"primary\">Читать дальше</Button>\n                            </NavLink>\n                        </Card.Body>\n\n                        {(isAdmin || isModer) && <Button className=\"delete-btn\" variant=\"secondary\" onClick={() => handleDeletePost(post)}>Удалить</Button>}\n                    </Card>\n                )\n            })}\n        </Container>\n    )\n}\n"]},"metadata":{},"sourceType":"module"}